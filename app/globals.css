@tailwind base;
@tailwind components;
@tailwind utilities;

/* =============================================
   DESIGN TOKENS — single source of truth
   Consumed by components below and throughout the app.
   ============================================= */
:root {
  color-scheme: light;

  /* Colour palette */
  --color-primary:       #1E40AF; /* blue-800  — enterprise trust */
  --color-primary-dark:  #1E3A8A; /* blue-900  — hover/emphasis */
  --color-primary-soft:  #EFF6FF; /* blue-50   — soft backgrounds */
  --color-success:       #059669; /* emerald-600 — profit / synced */
  --color-success-soft:  #D1FAE5; /* emerald-100 */
  --color-warning:       #D97706; /* amber-600 — warnings / low stock */
  --color-error:         #DC2626; /* red-600   — errors / failed */
  --color-surface:       #FFFFFF; /* card backgrounds */
  --color-background:    #F8FAFC; /* slate-50  — page background */
  --color-text:          #111827; /* gray-900  — primary text */
  --color-muted:         #6B7280; /* gray-500  — secondary text */
  --color-border:        #E5E7EB; /* gray-200  — default border */

  /* Typography scale */
  --text-xs:   0.75rem;   /* 12px — helper / captions */
  --text-sm:   0.875rem;  /* 14px — body / labels */
  --text-base: 1rem;      /* 16px — default body */
  --text-lg:   1.125rem;  /* 18px — section titles */
  --text-xl:   1.25rem;   /* 20px — page titles */
  --text-2xl:  1.5rem;    /* 24px — display */

  /* Spacing rhythm */
  --space-1: 0.25rem;
  --space-2: 0.5rem;
  --space-3: 0.75rem;
  --space-4: 1rem;
  --space-6: 1.5rem;
  --space-8: 2rem;

  /* Border radii */
  --radius-sm:  0.375rem; /* 6px  — badges, chips */
  --radius-md:  0.5rem;   /* 8px  — buttons, inputs */
  --radius-lg:  0.75rem;  /* 12px — cards (was 2xl) */
  --radius-xl:  1rem;     /* 16px — modals */
  --radius-2xl: 1.5rem;   /* 24px — large cards */

  /* Shadows */
  --shadow-card: 0 1px 3px rgba(0, 0, 0, 0.04), 0 4px 12px rgba(0, 0, 0, 0.04);
  --shadow-soft: 0 4px 6px -1px rgba(30, 64, 175, 0.05), 0 10px 30px rgba(30, 64, 175, 0.08);
  --shadow-focus: 0 0 0 3px rgba(30, 64, 175, 0.2);

  /* Z-index layers */
  --z-base:    0;
  --z-raised:  10;
  --z-nav:     30;
  --z-overlay: 40;
  --z-modal:   50;
  --z-toast:   60;
}

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: var(--font-sans);
  color: var(--color-text);
  background-color: var(--color-background);
  min-height: 100vh;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Respect OS-level motion preferences globally */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

a {
  color: inherit;
  text-decoration: none;
}

input, select, textarea {
  font-family: inherit;
}

/* =============================================
   RECEIPT STYLES (unchanged)
   ============================================= */
.receipt { width: 100%; }
.receipt-thermal { max-width: 320px; margin: 0 auto; }
.receipt-a4 { max-width: 720px; margin: 0 auto; }
.no-print { display: block; }

@media print {
  body { background: #ffffff; }
  .no-print { display: none !important; }
  .receipt-thermal { max-width: 320px; padding: 0; }
  .receipt-a4 { max-width: 100%; padding: 0; }
}

/* =============================================
   COMPONENT LAYER — consume tokens above
   ============================================= */
@layer components {

  /* ----- Layout ----- */
  .card {
    @apply rounded-xl border border-gray-200 bg-white shadow-card;
  }

  /* ----- Status badges ----- */
  .pill {
    @apply rounded-full px-2.5 py-0.5 text-xs font-semibold;
  }
  .pill-paid {
    @apply pill bg-emerald-100 text-emerald-800;
  }
  .pill-unpaid {
    @apply pill bg-red-100 text-red-700;
  }
  .pill-part-paid {
    @apply pill bg-amber-100 text-amber-800;
  }
  .pill-returned {
    @apply pill bg-gray-100 text-gray-600;
  }
  .pill-void {
    @apply pill bg-gray-100 text-gray-500;
  }
  /* Sync/connectivity badges */
  .pill-online   { @apply pill bg-emerald-100 text-emerald-800; }
  .pill-offline  { @apply pill bg-red-100 text-red-700; }
  .pill-pending  { @apply pill bg-amber-100 text-amber-800; }
  .pill-synced   { @apply pill bg-accentSoft text-accent; }

  /* ----- Buttons ----- */
  .btn {
    @apply inline-flex items-center justify-center rounded-lg px-4 py-2 text-sm font-semibold
           transition-all duration-150 focus-visible:outline-none focus-visible:ring-2
           focus-visible:ring-offset-2 active:scale-[0.97] disabled:pointer-events-none disabled:opacity-50;
  }
  .btn-primary {
    @apply btn bg-accent text-white hover:bg-accent/80 focus-visible:ring-accent
           shadow-sm hover:shadow-md;
  }
  .btn-secondary {
    @apply btn bg-accentSoft text-accent border border-accent/20 hover:bg-accent/10
           focus-visible:ring-accent;
  }
  .btn-destructive {
    @apply btn bg-rose text-white hover:bg-red-700 focus-visible:ring-rose;
  }
  .btn-ghost {
    @apply btn border border-gray-200 bg-white text-ink hover:bg-gray-50
           focus-visible:ring-accent;
  }
  .btn-success {
    @apply btn bg-success text-white hover:bg-emerald-700 focus-visible:ring-success
           shadow-sm hover:shadow-md;
  }

  /* ----- Inputs ----- */
  .input {
    @apply w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm
           transition-shadow duration-150
           placeholder:text-gray-400
           focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/20
           disabled:cursor-not-allowed disabled:opacity-50 disabled:bg-gray-50;
  }
  .input-error {
    @apply input border-rose ring-2 ring-rose/20;
  }
  .label {
    @apply text-xs font-medium uppercase tracking-wide text-gray-500 mb-1 block;
  }

  /* ----- Tables ----- */
  .table th {
    @apply text-left text-xs font-semibold uppercase tracking-wide text-gray-500
           bg-gray-50 px-4 py-3;
  }
  .table td {
    @apply text-sm px-4 py-3;
  }
  .table tr {
    @apply border-b border-gray-100 transition-colors hover:bg-gray-50/60;
  }
  .table tr:last-child {
    @apply border-0;
  }

  /* ----- Money / Numbers ----- */
  /* Apply to totals, prices, amounts for clarity */
  .money {
    @apply font-semibold tabular-nums tracking-tight;
  }
  .money-lg {
    @apply text-2xl font-bold tabular-nums tracking-tight;
  }
  .money-positive { @apply text-success; }
  .money-negative { @apply text-rose; }

  /* ----- Focus ring (accessibility) ----- */
  .focus-ring {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2;
  }
}

/* ---------- Onboarding Animations ---------- */
@keyframes fade-in-up {
  from { opacity: 0; transform: translateY(12px); }
  to   { opacity: 1; transform: translateY(0); }
}
@keyframes shimmer {
  0%   { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
@keyframes pulse-subtle {
  0%, 100% { opacity: 1; }
  50%      { opacity: .7; }
}
@keyframes scale-in {
  from { opacity: 0; transform: scale(.92); }
  to   { opacity: 1; transform: scale(1); }
}
@keyframes confetti-fall {
  0%   { transform: translateY(-20px) rotate(0deg); opacity: 1; }
  100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
}
@keyframes check-draw {
  from { stroke-dashoffset: 24; }
  to   { stroke-dashoffset: 0; }
}

.animate-fade-in-up   { animation: fade-in-up .5s ease-out both; }
.animate-shimmer      { animation: shimmer 2s linear infinite; background-size: 200% 100%; }
.animate-pulse-subtle { animation: pulse-subtle 2s ease-in-out infinite; }
.animate-scale-in     { animation: scale-in .4s ease-out both; }
.animate-check-draw   { animation: check-draw .4s ease-out .2s both; stroke-dasharray: 24; stroke-dashoffset: 24; }

/* Stagger children for list reveals */
.stagger-children > * { animation: fade-in-up .4s ease-out both; }
.stagger-children > *:nth-child(1) { animation-delay: 0s; }
.stagger-children > *:nth-child(2) { animation-delay: .07s; }
.stagger-children > *:nth-child(3) { animation-delay: .14s; }
.stagger-children > *:nth-child(4) { animation-delay: .21s; }
.stagger-children > *:nth-child(5) { animation-delay: .28s; }
.stagger-children > *:nth-child(6) { animation-delay: .35s; }
